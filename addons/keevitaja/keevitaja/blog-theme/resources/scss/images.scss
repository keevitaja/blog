@each $type, $setting in $images {
    .images-type-#{$type} {
        @include clearfix;

        @each $breakpoint, $config in $setting {
            @media screen and (min-width: #{$breakpoint}px) {
                $columns: map-get($config, columns);
                $dividers: map-get($config, columns) - 1;
                $gutter: map-get($config, gutter);

                margin-bottom: -$gutter;

                .image {
                    display: block;
                    float: right;
                    width: calc((100% - #{$dividers} * #{$gutter}) / #{$columns});
                    margin-right: $gutter;
                    margin-bottom: $gutter;
                    text-decoration: none;

                    &::nth-child(#{$columns}n+#{$columns}) {
                        margin-right: 0;
                    }

                    img {
                        display: block;
                        width: 100%;
                    }
                }
            }
        }
    }
}